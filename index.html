<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>文件站</title>
  <style>
      body {
          font-family: Arial, sans-serif;
          line-height: 1.6;
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
          background-color: #f4f4f4;
      }
      .container {
          background-color: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      .header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
      }
      #docSelect {
          padding: 10px;
          width: 300px;
      }
      #documentContent {
          background-color: #f9f9f9;
          padding: 20px;
          border-radius: 4px;
          min-height: 400px;
          overflow-x: auto;
      }
      .download-btn {
          background-color: #4CAF50;
          color: white;
          border: none;
          padding: 10px 20px;
          text-decoration: none;
          border-radius: 4px;
          cursor: pointer;
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>文件站</h1>
          <select id="docSelect" onchange="loadDocument()">
              <option value="">選擇文件</option>
          </select>
      </div>
      
      <div id="documentContent">
          <p>歡迎來到我的文件站！請從上方下拉選單選擇要查看的文件。</p>
      </div>
  </div>

  <script>
      // 動態載入文件列表
      async function loadDocumentList() {
          try {
              const response = await fetch('doc/');
              const text = await response.text();
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(text, 'text/html');
              const links = htmlDoc.querySelectorAll('a');
              const select = document.getElementById('docSelect');

              links.forEach(link => {
                  // 篩選 Markdown 文件
                  if (link.href.toLowerCase().endsWith('.md')) {
                      const option = document.createElement('option');
                      option.value = link.href;
                      option.textContent = link.textContent.replace(/\//g, '');
                      select.appendChild(option);
                  }
              });
          } catch (error) {
              console.error('無法載入文件列表', error);
          }
      }

      // 載入 Markdown 文件
      async function loadDocument() {
          const select = document.getElementById('docSelect');
          const url = select.value;
          const documentContent = document.getElementById('documentContent');

          if (!url) {
              documentContent.innerHTML = '<p>歡迎來到我的文件站！請從上方下拉選單選擇要查看的文件。</p>';
              return;
          }

          try {
              const response = await fetch(url);
              const markdownText = await response.text();
              
              // 直接顯示 Markdown 內容
              documentContent.innerHTML = markdownText;
          } catch (error) {
              console.error('無法載入文件', error);
              documentContent.textContent = '文件載入失敗';
          }
      }

      // 初始化：頁面載入時自動載入文件列表
      document.addEventListener('DOMContentLoaded', loadDocumentList);
  </script>
</body>
</html>